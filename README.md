# Zone Manager ‚Äî Home Assistant Integration + Lovelace Card

Zone Manager –ø–æ–º–æ–≥–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å **–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞** –∏ **–∑–æ–Ω—ã –æ—Å–≤–µ—â–µ–Ω–∏—è** —Å –¥–∞—Ç—á–∏–∫–∞–º–∏ –¥–≤–∏–∂–µ–Ω–∏—è: –≤—ã —Å–æ–±–∏—Ä–∞–µ—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ UI, –∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ—ë –≤ JSON-—Ñ–∞–π–ª. –î–∞–ª—å—à–µ —ç—Ç–æ—Ç JSON —É–¥–æ–±–Ω–æ —á–∏—Ç–∞—Ç—å –∏–∑ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–π –∏ —Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏–∫—É –≤–∫–ª—é—á–µ–Ω–∏—è —Å–≤–µ—Ç–∞ –ø–æ –∑–æ–Ω–∞–º –∏ –∏—Ö ‚Äú—Å–æ—Å–µ–¥—è–º‚Äù.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Backend (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ JSON (–≤ `config/<–≤–∞—à_—Ñ–∞–π–ª>.json`).
- CRUD –ø–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞–º/–∑–æ–Ω–∞–º —á–µ—Ä–µ–∑ WebSocket API.
- –°–µ—Ä–≤–∏—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä reload) –¥–ª—è –ø–µ—Ä–µ—á–∏—Ç—ã–≤–∞–Ω–∏—è JSON.
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ (–∑–∞—â–∏—Ç–∞ –æ—Ç ‚Äú–º—É—Å–æ—Ä–∞‚Äù) —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏ –¥–ª—è UI.

### Frontend (Lovelace –∫–∞—Ä—Ç–æ—á–∫–∞)
- –í—ã–±–æ—Ä –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–æ–Ω.
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏ –∑–æ–Ω.
- –°–ø–∏—Å–∫–∏ –≤—ã–±–æ—Ä–∞ `sensor.*` –∏ `light.*` —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ Area (UI —Ñ–∏–ª—å—Ç—Ä, –≤ JSON –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è).
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ‚Äú–ø–∞—Ä–Ω—ã—Ö‚Äù —Å–ø–∏—Å–∫–æ–≤ –∏ –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ—Ä—è–¥–∫–∞ (drag&drop).
- –ê–∫–∫—É—Ä–∞—Ç–Ω—ã–π UI –¥–ª—è —Å–≤–µ—Ç–ª–æ–π –∏ —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã Home Assistant.

---

## Service: `zone_manager.get_sensor_config`

–°–µ—Ä–≤–∏—Å –∏—â–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∑–æ–Ω—ã –ø–æ `entity_id` –¥–∞—Ç—á–∏–∫–∞ –≤ –¥–∞–Ω–Ω—ã—Ö `zone_manager` (–∏—Å—Ç–æ—á–Ω–∏–∫ ‚Äî `zone_manager.json`), –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ—ë –≤ –≤–∏–¥–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, —É–¥–æ–±–Ω–æ–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è—Ö.

### –ó–∞—á–µ–º –Ω—É–∂–µ–Ω
Home Assistant —à–∞–±–ª–æ–Ω–∞–º–∏ –Ω–µ —É–º–µ–µ—Ç —É–¥–æ–±–Ω–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ ‚Äú—á–∏—Ç–∞—Ç—å JSON —Å –¥–∏—Å–∫–∞‚Äù –ø—Ä—è–º–æ –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.  
`get_sensor_config` —Ä–µ—à–∞–µ—Ç —ç—Ç–æ, –ø–æ–∑–≤–æ–ª—è—è:
- –≤–∑—è—Ç—å `trigger.entity_id`
- –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∑–æ–Ω—ã
- –ø–µ—Ä–µ–¥–∞—Ç—å –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è –≤ –≤—ã–∑—ã–≤–∞–µ–º—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### –í—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- `entity_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π): entity_id –¥–∞—Ç—á–∏–∫–∞, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –∑–æ–Ω—É  
  –ü—Ä–∏–º–µ—Ä: `sensor.ms_4_1_4_3_state`
- `reload` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, bool, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`): –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ—á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–¥ –ø–æ–∏—Å–∫–æ–º  
  –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –µ—Å–ª–∏ –æ–∂–∏–¥–∞–µ—Ç–µ, —á—Ç–æ JSON –±—ã–ª –æ–±–Ω–æ–≤–ª—ë–Ω ‚Äú—Ç–æ–ª—å–∫–æ —á—Ç–æ‚Äù.

### –ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç (response data)
–°–µ—Ä–≤–∏—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç response data –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å `response_variable`.

–í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –ø–æ–ª—è:
- `found` ‚Äî `true/false`, –Ω–∞–π–¥–µ–Ω–∞ –ª–∏ –∑–æ–Ω–∞
- `entity_id` ‚Äî –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–π entity_id
- `space` ‚Äî –∏–º—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ (–¥–ª—è –ª–æ–≥–æ–≤/–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
- `zone` ‚Äî ‚Äú—Å—ã—Ä–æ–π‚Äù –æ–±—ä–µ–∫—Ç –∑–æ–Ω—ã (–∫–∞–∫ –≤ JSON)
- `neighbors` ‚Äî —Å–ø–∏—Å–æ–∫ —Å–æ—Å–µ–¥–Ω–∏—Ö –¥–∞—Ç—á–∏–∫–æ–≤
- `far_neighbors` ‚Äî —Å–ø–∏—Å–æ–∫ –¥–∞–ª—å–Ω–∏—Ö —Å–æ—Å–µ–¥–µ–π
- `neighbor_groups` ‚Äî —Å–ø–∏—Å–æ–∫ —Å–æ—Å–µ–¥–Ω–∏—Ö –≥—Ä—É–ø–ø —Å–≤–µ—Ç–∞
- `light_group` ‚Äî —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø —Å–≤–µ—Ç–∞ —Ç–µ–∫—É—â–µ–π –∑–æ–Ω—ã
- `light_group_single` ‚Äî –æ–¥–∏–Ω–æ—á–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å –≥—Ä—É–ø–ø—ã —Å–≤–µ—Ç–∞ (`string`), –µ—Å–ª–∏ `light_group` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–æ–≤–Ω–æ 1 —ç–ª–µ–º–µ–Ω—Ç  
  (—É–¥–æ–±–Ω–æ –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, –≥–¥–µ —Å–∫—Ä–∏–ø—Ç –æ–∂–∏–¥–∞–µ—Ç —Å—Ç—Ä–æ–∫—É)

## üñº –í–∏–∑—É–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∫–∞—Ä—Ç–æ—á–∫–∏
<img src="docs/images/black_back.png" alt="Zone Manager Card" width="400"> <img src="docs/images/white_back.png" alt="Zone Manager Card" width="400">
---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### üìÅ –í—Ä—É—á–Ω—É—é
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é:
   - `custom_components/zone_manager` ‚Üí `/config/custom_components/zone_manager`

2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É:
   - `www/zone-manager-card.js` ‚Üí `/config/www/zone-manager-card.js`

3. –î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Å—É—Ä—Å Lovelace:
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ü–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚Üí –†–µ—Å—É—Ä—Å—ã ‚Üí –î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Å—É—Ä—Å  
     URL: `/local/zone-manager-card.js?v=2.1.4`  
     –¢–∏–ø: `JavaScript Module`

4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Home Assistant.

---

## üß© –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ HACS (Integration)

> –í–∞–∂–Ω–æ: –≤ —ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ HACS —Å—Ç–∞–≤–∏—Ç **—Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é**. –ö–∞—Ä—Ç–æ—á–∫—É –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é –≤ `/config/www/` (—Å–º. —Ä–∞–∑–¥–µ–ª ‚Äú–í—Ä—É—á–Ω—É—é‚Äù).

1. HACS ‚Üí Integrations
2. ‚ãÆ ‚Üí **Custom repositories**
3. –í—Å—Ç–∞–≤–∏—Ç—å URL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, –≤—ã–±—Ä–∞—Ç—å —Ç–∏–ø **Integration**
4. Install ‚Üí –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Home Assistant
5. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ —Å–ª—É–∂–±—ã ‚Üí –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é ‚Üí **Zone Manager**

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1) –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ–±–∞–≤—å—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ UI. –í Config Flow —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ JSON-—Ñ–∞–π–ª—É (–Ω–∞–ø—Ä–∏–º–µ—Ä):
- `/config/zone_manager.json`

### 2) –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏
#### –ß–µ—Ä–µ–∑ UI
- ‚Äú–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É‚Äù ‚Üí –≤—ã–±—Ä–∞—Ç—å **Zone Manager**.

#### –ß–µ—Ä–µ–∑ YAML
```yaml
type: custom:zone-manager-card
```

### 3) –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç ‚Äú–∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã‚Äù –≤ JSON-—Ñ–∞–π–ª, –ø—É—Ç—å –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã —É–∫–∞–∑–∞–ª–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.
–≠—Ç–æ—Ç —Ñ–∞–π–ª –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è—Ö.

## üîñ –í–µ—Ä—Å–∏—è

–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è: 2.1.4
–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π: —Å–º. CHANGELOG.md.
