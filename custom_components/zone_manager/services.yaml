# ============================================================
# Zone Manager Services Documentation
# Описания всех сервисов интеграции Zone Manager
# 
# Зачем этот файл:
# Home Assistant автоматически загружает этот файл и показывает
# описания сервисов в Developer Tools, Automation Editor и других местах
# ============================================================

# ============================================================
# SERVICE: update_zone
# ============================================================
update_zone:
  # Название сервиса (видно в UI)
  name: Добавить или обновить зону
  
  # Описание что делает сервис (видно при наведении)
  description: >
    Добавляет новую зону в конфигурацию или обновляет существующую.
    Если зона с таким sensor_id уже существует, её параметры будут перезаписаны.
    Данные сохраняются в файл /config/zones_config.json
  
  # Параметры сервиса (поля формы)
  fields:
    
    # Параметр 1: space
    space:
      # Название поля в UI
      name: Пространство
      
      # Описание параметра
      description: >
        Имя пространства для организации зон.
        Позволяет группировать несвязанные зоны в отдельные пространства.
        Примеры: space_1, space_2, office, home и т.д.
      
      # Пример значения (подсказка для пользователя)
      example: "space_1"
      
      # Обязательный ли параметр
      required: false
      
      # Значение по умолчанию если не указан
      default: "space_1"
      
      # Selector: как выбирать значение (text = текстовое поле)
      selector:
        text:
          multiline: false
    
    # Параметр 2: sensor_id
    sensor_id:
      name: ID датчика (ключ зоны)
      description: >
        Уникальный идентификатор датчика, который будет ключом для поиска зоны.
        По этому ID автоматизации будут находить конфигурацию зоны.
        Должен быть в формате: sensor.НАЗВАНИЕ_ДАТЧИКА
      example: "sensor.ms_5_1_4_11_state"
      required: true
      selector:
        text:
          multiline: false
    
    # Параметр 3: zone_config
    zone_config:
      name: Конфигурация зоны
      description: >
        JSON объект с полной конфигурацией зоны.
        Должен содержать следующие ключи:
        - zone_name (string): Человеческое имя зоны
        - neighbors (list): Список ID соседних датчиков
        - light_group (string): ID группы светильников для этой зоны
        - far_neighbors (list): Список ID дальних соседних датчиков
        - neighbor_groups (list): Список ID соседних групп светильников
      example: >
        {
          "zone_name": "Зона 1",
          "neighbors": ["sensor.ms_5_1_3_8_state", "sensor.ms_5_1_5_10_state"],
          "light_group": "light.koridor_510_0",
          "far_neighbors": ["sensor.ms_5_1_2_7_state"],
          "neighbor_groups": ["light.rekreatsiia_502_1"]
        }
      required: true
      selector:
        object:


# ============================================================
# SERVICE: delete_zone
# ============================================================
delete_zone:
  name: Удалить зону
  description: >
    Удаляет зону из конфигурации по ID датчика.
    Данные сохраняются в файл /config/zones_config.json
  
  fields:
    space:
      name: Пространство
      description: >
        Имя пространства, из которого удалить зону.
        Должно совпадать с пространством где была добавлена зона.
      example: "space_1"
      required: false
      default: "space_1"
      selector:
        text:
          multiline: false
    
    sensor_id:
      name: ID датчика
      description: >
        ID датчика зоны для удаления.
        Зона с этим ID будет полностью удалена из конфигурации.
      example: "sensor.ms_5_1_4_11_state"
      required: true
      selector:
        text:
          multiline: false


# ============================================================
# SERVICE: get_zone
# ============================================================
get_zone:
  name: Получить данные зоны
  description: >
    Получает все параметры зоны по ID датчика.
    Используется в автоматизациях для получения соседей, групп
    светильников и других параметров зоны при срабатывании датчика.
    Результат доступен через переменную response в automation.
  
  fields:
    sensor_id:
      name: ID датчика
      description: >
        ID датчика для поиска конфигурации зоны.
        Будут возвращены все параметры этой зоны.
      example: "sensor.ms_5_1_4_11_state"
      required: true
      selector:
        text:
          multiline: false
